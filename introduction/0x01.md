## 绪论

### 学习目标
1. 理解 系统性能、人员、活动和挑战
2. 理解 观测和实验工具区别
3. 对**性能观测**有一个基本的了解
   1. 统计
   2. 剖析
   3. 火焰图
   4. 跟踪
   5. 静态观测
   6. 动态观测
4. 了解方法和`linux`的60秒检查表


### 系统性能

系统性能对整个计算机系统性能的研究，包括主要 **硬件组件** 和 **软件组件**。
所有 数据路径上 和 从 存储设备到 应用软件上 所发生的事情都包括在内，因为这些都会影响性能

对于分布式系统来说，多台服务器和多个应用

系统性能的典型目标是通过
1. 减少延时
2. 降低计算成本
   1. 消除低效之处
   2. 提高系统吞吐量
   3. 进行常规性能调优
来改善终端用户的体检

系统性能的着眼点是 全栈，表示从应用程序到硬件的整个软件栈，包括系统库、内核以及硬件本身
如下图所示

![通用系统软件栈](%E9%80%9A%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E6%A0%88.jpg)

### 人员

系统性能是一项多人参与的事务，包括
1. 系统管理员(SA)
2. 网站可靠工程师(SRE)
3. 应用开发者(DEV)
4. 网络工程师
5. 数据库管理员
6. 网站管理员
等

鉴于性能只是工作的一部分，性能分析聚焦于该角色负责的领域，网络团队检查网络，数据库团队检查数据库等

### 活动

下面的步骤是软件项目生命周期中从构思到开发直至生产部署的理想步骤

1.  对未来产品设置性能目标和建立性能模型
2.  基于软件或者硬件原型进行特征归纳
3.  在测试环境中对正在开发的产品进行性能分析
4.  对新版本的产品做非回归性测试
5.  针对软件发布版本的基准测试
6.  目标生产环境的概念验证(proof-of-concept)测试
7.  生产环境中的性能调优
8.  监测生产环境中运行的软件
9.  生产环境中问题的性能分析
10. 对生产环境的问题做事件回顾
11. 开发性能工具以加强生产环境分析

步骤1-5是传统软件产品开发过程
对后面的产品发行，可能先在目标环境（客户端或者本地）进行概念验证测试、直接进行部署或者配置

如果在生产环境碰到问题，（步骤6-9），说明该问题在软件开发阶段没有被发现或者修复
生产环境中的问题的性能分析（第9步），需要SRE的参与
之后的步骤就是开事件回顾会议，用以分析发生了什么，分享调试技术

**在云计算过程中**
1. 鼓励跳过步骤1-5，其中技术在单个实例上测试新软件，其工作负载仅为 生产环境工作负载的一小部分（称为金丝雀测试）
2. 另一种技术用到了软件部署正常步骤，流量逐渐转移到一个新的实例池，同时让旧的实例池在线做备份，称为 蓝绿部署
   1. 运用这样安全无虞的选项，新软件常常不需要事先做任何性能分析，直接在生产环境中进行测试，并可以在必要时进行迅速的回退

### 视角

审视性能时通过不同的视角来进行的
1. 负载分析`workload analysis`
2. 资源分析`resource analysis`

系统管理员作为系统资源的负责人，通常采用资源分析的视角
程序开发者对最终实现的负载性能负载，通常采用负载分析视角

